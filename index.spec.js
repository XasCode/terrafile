const path = require('path');
const exec = require('child_process').exec;

const consoleSpy = jest.spyOn(console, 'log').mockImplementation()

const helpContent = `Usage: index [options] [command]

Manage vendored modules using a JSON file.

Options:
  -V, --version      Show version information for terrafile
  -h, --help         display help for command

Commands:
  install [options]  Installs the files in your terrafile.json
  help [command]     display help for command`;

const helpInstallContent = `Usage: index install [options]

Installs the files in your terrafile.json

Options:
  -d, --directory <string>  module directory (default: "vendor/modules")
  -f, --file <string>       config file (default: "terrafile.json")
  -h, --help                display help for command`;

const unknownCommand = `error: unknown command 'foo'. See 'index --help'.`;

const unknownOptionShort = `error: unknown option '-b'`;
const unknownOptionLong = `error: unknown option '--bar'`;

const default_opts = {"directory":"vendor/modules","file":"terrafile.json"};


const version = require('./package.json').version;

const testBackends = ["", "./include.js", "./include.mock.js"];
const helpCommands = ["", "help"];
const commands = ["", "install", "foo"];
const helps = [""];//["", "-h", "--help"];
const versions = [""];//["", "-V", "--version"];
const directories = [""];//["", "-d bar", "--directory bar"];
const files = [""];//["", "-f foobar", "--file foobar"];
const badOptions = [""];//["", "-b", "--bar"];

const variations = [];

  for (helpCommand of helpCommands) {
    for (command of commands) {
      for (help of helps) {
        for (ver of versions) {
          for (directory of directories) {
            for (file of files) {
              for (badOption of badOptions) {
                function getOptions() {
                  return {
                    ...default_opts,
                    ...(directory !== "" ? {directory: directory.split(' ')[1]} : {}),
                    ...(file !== "" ? {file: file.split(' ')[1]} : {})
                  };
                }
                function getCode() {
                  return  ver !== "" ||
                          helpCommand == "" && command == "" ||
                          helpCommand !== "" && command == "foo" ||
                          helpCommand == "" && command == "foo" 
                  ? 1
                  : 0;
                }
                function getCommand() {
                  return command == "install" && helpCommand == "" && ver == "" && help == "" && badOption == "" ? "install" : "";
                }
                function getArgs()  {
                  return `${helpCommand} ${command} ${help} ${ver} ${directory} ${file} ${badOption}`.split(' ').filter(cur=>(cur.length > 0)).join(' ') 
                }

                variations.push({
                  backends: testBackends,
                  args: getArgs(),
                  command: getCommand(),
                  options: {
                    ...default_opts,
                    ...(directory !== "" ? {directory: directory.split(' ')[1]} : {}),
                    ...(file !== "" ? {file: file.split(' ')[1]} : {})
                  },
                  code: getCode(),
                  stdOut: getArgs() == "" ? "" :
                    ver !== "" ? version :
                    command !== "install" && command !== "" && helpCommand !== "" ? "" :          //help foo
                    command !== "install" && command !== "" && help == "" ? "" :                  //foo
                    command == "install" && helpCommand !== "" ? helpInstallContent :             //help install
                    getCommand() !== "install" && (helpCommand == "help" || help !== "") ? helpContent : 
                    getCommand() !== "install" && (help == "") ? "" :
                    getCommand() == "install" && (helpCommand == "help" || help !== "") ? helpInstallContent :
                    getCommand() == "install" && helpCommand == "" && help == "" && badOption == "" ? JSON.stringify(getOptions()) : "",
                  stdErr: getArgs() == "" ? helpContent :
                    ver !== "" ? "" :
                    command !== "install" && command !== "" && helpCommand !== "" ? helpContent : //help foo
                    command !== "install" && command !== "" && help == "" ? unknownCommand :      //foo
                    command == "install" && helpCommand !== "" ? "" :                             //help install
                    getCommand() !== "install" && (helpCommand == "help" || help !== "") ? "" :
                    getCommand() !== "install" && (help == "") ? helpContent :
                    getCommand() == "install" && (helpCommand == "help" ||help !== "") ? "" :
                    getCommand() == "install" && helpCommand == "" && help == "" && badOption == "" ? "" : "",
                });
                
                //variations.push(`${helpCommand} ${command} ${help} ${ver} ${directory} ${file} ${badOption}`);
              }
            }
          }
        }
      }
    }
  }

/*
describe.each`
  backends        | args                                                                | command      | options                                                  | code    | stdOut                                                                 | stdErr
  ${testBackends} | ${""}                                                               | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install"}                                                        | ${"install"} | ${default_opts}                                          | ${0}    | ${JSON.stringify(default_opts)}                                        | ${""}
  ${testBackends} | ${"foo"}                                                            | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help"}                                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo"}                                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h"}                                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V"}                                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V"}                                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V"}                                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V"}                                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V"}                                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar"}                                                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar"}                                                 | ${"install"} | ${ {...default_opts, directory: "bar"} }                 | ${0}    | ${JSON.stringify({...default_opts, directory: "bar"})}                 | ${""}
  ${testBackends} | ${"foo -d bar"}                                                     | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar"}                                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar"}                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar"}                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar"}                                        | ${"install"} | ${ {...default_opts, directory: "bar"} }                 | ${0}    | ${JSON.stringify({...default_opts, directory: "bar"})}                 | ${""}
  ${testBackends} | ${"foo --directory bar"}                                            | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-f foobar"}                                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -f foobar"}                                              | ${"install"} | ${ {...default_opts, file: "foobar"} }                   | ${0}    | ${JSON.stringify({...default_opts, file: "foobar"})}                   | ${""}
  ${testBackends} | ${"foo -f foobar"}                                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -f foobar"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -f foobar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -f foobar"}                                             | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -f foobar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -f foobar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -f foobar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -f foobar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -f foobar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -f foobar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -f foobar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -f foobar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -f foobar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -f foobar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -f foobar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -f foobar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -f foobar"}                                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -f foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -f foobar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -f foobar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -f foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -f foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -f foobar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -f foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -f foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -f foobar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -f foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -f foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -f foobar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -f foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -f foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -f foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -f foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -f foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar -f foobar"}                                               | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar -f foobar"}                                       | ${"install"} | ${ {...default_opts, directory: "bar", file: "foobar"} } | ${0}    | ${JSON.stringify({...default_opts, directory: "bar", file: "foobar"})} | ${""}
  ${testBackends} | ${"foo -d bar -f foobar"}                                           | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar -f foobar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar -f foobar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar -f foobar"}                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar -f foobar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar -f foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar -f foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar -f foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar -f foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar -f foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar -f foobar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar -f foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar -f foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar -f foobar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar -f foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar -f foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar -f foobar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar -f foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar -f foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar -f foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar -f foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar -f foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar -f foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar -f foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar -f foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar -f foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar -f foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar -f foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar -f foobar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar -f foobar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar -f foobar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar -f foobar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar -f foobar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar -f foobar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar -f foobar"}                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar -f foobar"}                              | ${"install"} | ${ {...default_opts, directory: "bar", file: "foobar"} } | ${0}    | ${JSON.stringify({...default_opts, directory: "bar", file: "foobar"})} | ${""}
  ${testBackends} | ${"foo --directory bar -f foobar"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar -f foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar -f foobar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar -f foobar"}                             | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar -f foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar -f foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar -f foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar -f foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar -f foobar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar -f foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar -f foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar -f foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar -f foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar -f foobar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar -f foobar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar -f foobar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar -f foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar -f foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar -f foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar -f foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar -f foobar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar -f foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar -f foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar -f foobar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar -f foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar -f foobar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar -f foobar"}               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar -f foobar"}                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar -f foobar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar -f foobar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar -f foobar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar -f foobar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar -f foobar"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar -f foobar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--file foobar"}                                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --file foobar"}                                          | ${"install"} | ${ {...default_opts, file: "foobar"} }                   | ${0}    | ${JSON.stringify({...default_opts, file: "foobar"})}                   | ${""}
  ${testBackends} | ${"foo --file foobar"}                                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --file foobar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --file foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --file foobar"}                                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --file foobar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --file foobar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --file foobar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --file foobar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --file foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --file foobar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --file foobar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --file foobar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --file foobar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --file foobar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --file foobar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --file foobar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --file foobar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --file foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --file foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --file foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --file foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --file foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --file foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --file foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --file foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --file foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --file foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --file foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --file foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --file foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --file foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --file foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --file foobar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --file foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar --file foobar"}                                           | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar --file foobar"}                                   | ${"install"} | ${ {...default_opts, directory: "bar", file: "foobar"} } | ${0}    | ${JSON.stringify({...default_opts, directory: "bar", file: "foobar"})} | ${""}
  ${testBackends} | ${"foo -d bar --file foobar"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar --file foobar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar --file foobar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar --file foobar"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar --file foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar --file foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar --file foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar --file foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar --file foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar --file foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar --file foobar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar --file foobar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar --file foobar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar --file foobar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar --file foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar --file foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar --file foobar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar --file foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar --file foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar --file foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar --file foobar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar --file foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar --file foobar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar --file foobar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar --file foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar --file foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar --file foobar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar --file foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar --file foobar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar --file foobar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar --file foobar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar --file foobar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar --file foobar"}                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar --file foobar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar --file foobar"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar --file foobar"}                          | ${"install"} | ${ {...default_opts, directory: "bar", file: "foobar"} } | ${0}    | ${JSON.stringify({...default_opts, directory: "bar", file: "foobar"})} | ${""}
  ${testBackends} | ${"foo --directory bar --file foobar"}                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar --file foobar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar --file foobar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar --file foobar"}                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar --file foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar --file foobar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar --file foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar --file foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar --file foobar"}                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar --file foobar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar --file foobar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar --file foobar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar --file foobar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar --file foobar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar --file foobar"}                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar --file foobar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar --file foobar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar --file foobar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar --file foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar --file foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar --file foobar"}                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar --file foobar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar --file foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar --file foobar"}                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar --file foobar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar --file foobar"}                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar --file foobar"}           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar --file foobar"}               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar --file foobar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar --file foobar"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar --file foobar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar --file foobar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar --file foobar"}         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar --file foobar"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}

  ${testBackends} | ${"-b"}                                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -b"}                                                        | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo -b"}                                                            | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -b"}                                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -b"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -b"}                                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -b"}                                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -b"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -b"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -b"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -b"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -b"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -b"}                                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -b"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -b"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -b"}                                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -b"}                                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -b"}                                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -b"}                                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -b"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -b"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -b"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -b"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -b"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -b"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -b"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -b"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -b"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -b"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -b"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar -b"}                                                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar -b"}                                                 | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo -d bar -b"}                                                     | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar -b"}                                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar -b"}                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar -b"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar -b"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar -b"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar -b"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar -b"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar -b"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar -b"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar -b"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar -b"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar -b"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar -b"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar -b"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar -b"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar -b"}                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar -b"}                                        | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo --directory bar -b"}                                            | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar -b"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar -b"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar -b"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar -b"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar -b"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar -b"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-f foobar -b"}                                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -f foobar -b"}                                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo -f foobar -b"}                                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -f foobar -b"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -f foobar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -f foobar -b"}                                             | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -f foobar -b"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -f foobar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -f foobar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -f foobar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -f foobar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -f foobar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -f foobar -b"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -f foobar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -f foobar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -f foobar -b"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -f foobar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -f foobar -b"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -f foobar -b"}                                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -f foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -f foobar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -f foobar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -f foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -f foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -f foobar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -f foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -f foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -f foobar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -f foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -f foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -f foobar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -f foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -f foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -f foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -f foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -f foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar -f foobar -b"}                                               | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar -f foobar -b"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo -d bar -f foobar -b"}                                           | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar -f foobar -b"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar -f foobar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar -f foobar -b"}                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar -f foobar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar -f foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar -f foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar -f foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar -f foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar -f foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar -f foobar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar -f foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar -f foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar -f foobar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar -f foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar -f foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar -f foobar -b"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar -f foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar -f foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar -f foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar -f foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar -f foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar -f foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar -f foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar -f foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar -f foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar -f foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar -f foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar -f foobar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar -f foobar -b"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar -f foobar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar -f foobar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar -f foobar -b"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar -f foobar -b"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar -f foobar -b"}                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar -f foobar -b"}                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo --directory bar -f foobar -b"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar -f foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar -f foobar -b"}                         | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar -f foobar -b"}                             | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar -f foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar -f foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar -f foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar -f foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar -f foobar -b"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar -f foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar -f foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar -f foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar -f foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar -f foobar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar -f foobar -b"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar -f foobar -b"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar -f foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar -f foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar -f foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar -f foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar -f foobar -b"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar -f foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar -f foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar -f foobar -b"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar -f foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar -f foobar -b"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar -f foobar -b"}               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar -f foobar -b"}                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar -f foobar -b"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar -f foobar -b"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar -f foobar -b"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar -f foobar -b"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar -f foobar -b"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar -f foobar -b"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--file foobar -b"}                                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --file foobar -b"}                                          | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo --file foobar -b"}                                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --file foobar -b"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --file foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --file foobar -b"}                                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --file foobar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --file foobar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --file foobar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --file foobar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --file foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --file foobar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --file foobar -b"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --file foobar -b"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --file foobar -b"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --file foobar -b"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --file foobar -b"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --file foobar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --file foobar -b"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --file foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --file foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --file foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --file foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --file foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --file foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --file foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --file foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --file foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --file foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --file foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --file foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --file foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --file foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --file foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --file foobar -b"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --file foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar --file foobar -b"}                                           | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar --file foobar -b"}                                   | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo -d bar --file foobar -b"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar --file foobar -b"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar --file foobar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar --file foobar -b"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar --file foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar --file foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar --file foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar --file foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar --file foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar --file foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar --file foobar -b"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar --file foobar -b"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar --file foobar -b"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar --file foobar -b"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar --file foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar --file foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar --file foobar -b"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar --file foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar --file foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar --file foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar --file foobar -b"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar --file foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar --file foobar -b"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar --file foobar -b"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar --file foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar --file foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar --file foobar -b"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar --file foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar --file foobar -b"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar --file foobar -b"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar --file foobar -b"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar --file foobar -b"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar --file foobar -b"}                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar --file foobar -b"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar --file foobar -b"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar --file foobar -b"}                          | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionShort}
  ${testBackends} | ${"foo --directory bar --file foobar -b"}                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar --file foobar -b"}                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar --file foobar -b"}                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar --file foobar -b"}                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar --file foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar --file foobar -b"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar --file foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar --file foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar --file foobar -b"}                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar --file foobar -b"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar --file foobar -b"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar --file foobar -b"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar --file foobar -b"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar --file foobar -b"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar --file foobar -b"}                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar --file foobar -b"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar --file foobar -b"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar --file foobar -b"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar --file foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar --file foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar --file foobar -b"}                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar --file foobar -b"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar --file foobar -b"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar --file foobar -b"}                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar --file foobar -b"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar --file foobar -b"}                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar --file foobar -b"}           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar --file foobar -b"}               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar --file foobar -b"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar --file foobar -b"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar --file foobar -b"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar --file foobar -b"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar --file foobar -b"}         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar --file foobar -b"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}

  ${testBackends} | ${"--bar"}                                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --bar"}                                                        | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo --bar"}                                                            | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --bar"}                                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --bar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --bar"}                                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --bar"}                                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --bar"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --bar"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --bar"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --bar"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --bar"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --bar"}                                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --bar"}                                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --bar"}                                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --bar"}                                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --bar"}                                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --bar"}                                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --bar"}                                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --bar"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --bar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar --bar"}                                                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar --bar"}                                                 | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo -d bar --bar"}                                                     | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar --bar"}                                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar --bar"}                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar --bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar --bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar --bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar --bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar --bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar --bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar --bar"}                                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar --bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar --bar"}                                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar --bar"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar --bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar --bar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar --bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar --bar"}                                                | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar --bar"}                                        | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo --directory bar --bar"}                                            | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar --bar"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar --bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar --bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar --bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar --bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar --bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-f foobar --bar"}                                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -f foobar --bar"}                                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo -f foobar --bar"}                                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -f foobar --bar"}                                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -f foobar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -f foobar --bar"}                                             | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -f foobar --bar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -f foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -f foobar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -f foobar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -f foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -f foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -f foobar --bar"}                                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -f foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -f foobar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -f foobar --bar"}                                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -f foobar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -f foobar --bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -f foobar --bar"}                                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -f foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -f foobar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -f foobar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -f foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -f foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -f foobar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -f foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -f foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -f foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -f foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -f foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -f foobar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -f foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -f foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -f foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -f foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -f foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar -f foobar --bar"}                                               | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar -f foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo -d bar -f foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar -f foobar --bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar -f foobar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar -f foobar --bar"}                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar -f foobar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar -f foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar -f foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar -f foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar -f foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar -f foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar -f foobar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar -f foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar -f foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar -f foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar -f foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar -f foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar -f foobar --bar"}                                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar -f foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar -f foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar -f foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar -f foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar -f foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar -f foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar -f foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar -f foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar -f foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar -f foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar -f foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar -f foobar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar -f foobar --bar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar -f foobar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar -f foobar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar -f foobar --bar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar -f foobar --bar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar -f foobar --bar"}                                      | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar -f foobar --bar"}                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo --directory bar -f foobar --bar"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar -f foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar -f foobar --bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar -f foobar --bar"}                             | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar -f foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar -f foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar -f foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar -f foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar -f foobar --bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar -f foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar -f foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar -f foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar -f foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar -f foobar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar -f foobar --bar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar -f foobar --bar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar -f foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar -f foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar -f foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar -f foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar -f foobar --bar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar -f foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar -f foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar -f foobar --bar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar -f foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar -f foobar --bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar -f foobar --bar"}               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar -f foobar --bar"}                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar -f foobar --bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar -f foobar --bar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar -f foobar --bar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar -f foobar --bar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar -f foobar --bar"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar -f foobar --bar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--file foobar --bar"}                                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --file foobar --bar"}                                          | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo --file foobar --bar"}                                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --file foobar --bar"}                                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --file foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --file foobar --bar"}                                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --file foobar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --file foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --file foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --file foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --file foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --file foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --file foobar --bar"}                                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --file foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --file foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --file foobar --bar"}                                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --file foobar --bar"}                                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --file foobar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --file foobar --bar"}                                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --file foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --file foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --file foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --file foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --file foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --file foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --file foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --file foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --file foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --file foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --file foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --file foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --file foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --file foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --file foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --file foobar --bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --file foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-d bar --file foobar --bar"}                                           | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install -d bar --file foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo -d bar --file foobar --bar"}                                       | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help -d bar --file foobar --bar"}                                      | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install -d bar --file foobar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo -d bar --file foobar --bar"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h -d bar --file foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h -d bar --file foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h -d bar --file foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help -d bar --file foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help -d bar --file foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help -d bar --file foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V -d bar --file foobar --bar"}                                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V -d bar --file foobar --bar"}                                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V -d bar --file foobar --bar"}                                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V -d bar --file foobar --bar"}                                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V -d bar --file foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V -d bar --file foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V -d bar --file foobar --bar"}                                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V -d bar --file foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V -d bar --file foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V -d bar --file foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V -d bar --file foobar --bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V -d bar --file foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version -d bar --file foobar --bar"}                                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version -d bar --file foobar --bar"}                         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version -d bar --file foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version -d bar --file foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version -d bar --file foobar --bar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version -d bar --file foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version -d bar --file foobar --bar"}                              | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version -d bar --file foobar --bar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version -d bar --file foobar --bar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version -d bar --file foobar --bar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version -d bar --file foobar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version -d bar --file foobar --bar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--directory bar --file foobar --bar"}                                  | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"install --directory bar --file foobar --bar"}                          | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownOptionLong}
  ${testBackends} | ${"foo --directory bar --file foobar --bar"}                              | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${unknownCommand}
  ${testBackends} | ${"help --directory bar --file foobar --bar"}                             | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"help install --directory bar --file foobar --bar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"help foo --directory bar --file foobar --bar"}                         | ${""}        | ${{}}                                                    | ${1}    | ${""}                                                                  | ${helpContent}
  ${testBackends} | ${"-h --directory bar --file foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install -h --directory bar --file foobar --bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo -h --directory bar --file foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"--help --directory bar --file foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"install --help --directory bar --file foobar --bar"}                   | ${""}        | ${{}}                                                    | ${0}    | ${helpInstallContent}                                                  | ${""}
  ${testBackends} | ${"foo --help --directory bar --file foobar --bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${helpContent}                                                         | ${""}
  ${testBackends} | ${"-V --directory bar --file foobar --bar"}                               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -V --directory bar --file foobar --bar"}                       | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -V --directory bar --file foobar --bar"}                           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help -V --directory bar --file foobar --bar"}                          | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install -V --directory bar --file foobar --bar"}                  | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo -V --directory bar --file foobar --bar"}                      | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h -V --directory bar --file foobar --bar"}                            | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h -V --directory bar --file foobar --bar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h -V --directory bar --file foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help -V --directory bar --file foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help -V --directory bar --file foobar --bar"}                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help -V --directory bar --file foobar --bar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--version --directory bar --file foobar --bar"}                        | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --version --directory bar --file foobar --bar"}                | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --version --directory bar --file foobar --bar"}                    | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help --version --directory bar --file foobar --bar"}                   | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help install --version --directory bar --file foobar --bar"}           | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"help foo --version --directory bar --file foobar --bar"}               | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"-h --version --directory bar --file foobar --bar"}                     | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install -h --version --directory bar --file foobar --bar"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo -h --version --directory bar --file foobar --bar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"--help --version --directory bar --file foobar --bar"}                 | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"install --help --version --directory bar --file foobar --bar"}         | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
  ${testBackends} | ${"foo --help --version --directory bar --file foobar --bar"}             | ${""}        | ${{}}                                                    | ${0}    | ${version}                                                             | ${""}
describe.each`('$args', ({backends, args, command, options, code, stdOut, stdErr}) => {
*/
describe.each(variations)(`%s`, ({backends, args, command, options, code, stdOut, stdErr}) => {

  beforeEach(() => {
    consoleSpy.mockClear()
  });

  test.each(backends)(`Check BE output (BE="%s", args="${args}")`, async (backend) => {
    const { install } = require(backend.length > 0 ? backend : './include');
    switch(command) {
      case "install": {
        install(options);
        expect(console.log).toBeCalledTimes(1);
        expect(console.log).toHaveBeenLastCalledWith(stdOut);
        break;
      }
      default: {
        expect(console.log).toBeCalledTimes(0);
      }
    }
  });

  test.each(backends)(`Check CLI output (BE="%s", args="${args}")`, async (backend) => {
    //console.log(`${variations.length}`);
    const result = await cli(args.split(' '), '.', backend);
    expect(result.stdout).toBe(`${stdOut}${stdOut.length>0?'\n':''}`);
    expect(result.stderr).toBe(`${stdErr}${stdErr.length>0?'\n':''}`);
    expect(result.code).toBe(code);
  });

});

function cli(args, cwd, api) {
  return new Promise(resolve => { 
    exec(
      `node ${path.resolve('./index')} ${args.join(' ')}`,
      {
        env: api.length > 0 ? { ...process.env, terrafile_be_api: api } : { ...process.env },
        cwd
      },
      (error, stdout, stderr) => {
        resolve({
          code: error && error.code ? error.code : 0,
          error,
          stdout,
          stderr
        });
      }
    );
  });
}
